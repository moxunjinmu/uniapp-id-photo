# UniApp è¯ä»¶ç…§åˆ¶ä½œåº”ç”¨

ä¸€ä¸ªåŸºäº Vue 3 + TypeScript + Vite + UnoCSS çš„ uni-app è¯ä»¶ç…§åˆ¶ä½œåº”ç”¨ï¼Œæ”¯æŒå¤šç«¯å¼€å‘ï¼ˆå°ç¨‹åºã€H5ã€APPï¼‰ï¼Œæä¾›è¯ä»¶ç…§æ‹æ‘„ã€èƒŒæ™¯è‰²æ›´æ¢ã€æ’ç‰ˆç­‰åŠŸèƒ½ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg) ![Vue](https://img.shields.io/badge/Vue-3.x-brightgreen.svg) ![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg) ![Vite](https://img.shields.io/badge/Vite-4.x-646cff.svg) ![uni-app](https://img.shields.io/badge/uni--app-3.x-green.svg) ![UnoCSS](https://img.shields.io/badge/UnoCSS-latest-8D66FE.svg) ![Pinia](https://img.shields.io/badge/Pinia-latest-yellow.svg) ![ESLint](https://img.shields.io/badge/ESLint-9.x-4B32C3.svg) ![Prettier](https://img.shields.io/badge/Prettier-3.x-F7B93E.svg) ![Sass](https://img.shields.io/badge/Sass-latest-CC6699.svg)

## åº”ç”¨æˆªå›¾

<table>
  <tr>
    <td><img src="devUI3.0/cover/home.png" alt="é¦–é¡µ" width="220"/></td>
    <td><img src="devUI3.0/cover/photo_result.png" alt="ç…§ç‰‡ç»“æœ" width="220"/></td>
    <td><img src="devUI3.0/cover/camera.png" alt="ç›¸æœºé¡µé¢" width="220"/></td>
  </tr>
</table>

## ç‰¹æ€§

- ğŸ“¸ è¯ä»¶ç…§æ‹æ‘„ä¸å¤„ç†
- ğŸ¨ å¤šç§èƒŒæ™¯è‰²é€‰æ‹©ä¸æ›´æ¢ï¼ˆç™½è‰²ã€è“è‰²ã€çº¢è‰²ç­‰ï¼‰
- ğŸ–¼ï¸ ç…§ç‰‡æ’ç‰ˆä¸é¢„è§ˆåŠŸèƒ½ï¼ˆæ”¯æŒå¤šç§å°ºå¯¸çš„è¯ä»¶ç…§é¢„è§ˆï¼‰
- ğŸ’¾ ç…§ç‰‡ä¸‹è½½ä¸ä¿å­˜åŠŸèƒ½ï¼ˆæ”¯æŒä¿å­˜åˆ°ç›¸å†Œã€æ–‡ä»¶ç³»ç»Ÿï¼‰
- ğŸ“± æ”¯æŒå¤šç«¯å¼€å‘ï¼ˆå¾®ä¿¡å°ç¨‹åºã€H5ã€Appï¼‰
- ğŸ›¡ï¸ å›¾ç‰‡è‡ªåŠ¨ç¼“å­˜ï¼Œæé«˜æ€§èƒ½
- ğŸ§° å®Œæ•´çš„ä»£ç è§„èŒƒä¸æäº¤è§„èŒƒ
- ğŸ” ESLint + Prettier ä»£ç è´¨é‡æ§åˆ¶
- ğŸ”„ Git Hooks è‡ªåŠ¨åŒ–å·¥ä½œæµ
- ğŸ“¦ Pinia çŠ¶æ€ç®¡ç†
- ğŸ› ï¸ è¯·æ±‚å°è£…å’Œæ‹¦æˆªå™¨
- ğŸ§© è‡ªåŠ¨å¯¼å…¥ API å’Œç»„ä»¶
- ğŸ¨ é›†æˆ UnoCSS åŸå­åŒ– CSS æ¡†æ¶

## ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0ï¼ˆæ¨èä½¿ç”¨ nvm ç®¡ç† Node ç‰ˆæœ¬ï¼‰
- Vue CLI >= 5.0.0
- å¼€å‘å·¥å…·ï¼šVSCode æˆ– Cursor ç¼–è¾‘å™¨
- å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼ˆç”¨äºå¼€å‘å¾®ä¿¡å°ç¨‹åºï¼‰

## å¿«é€Ÿå¼€å§‹

### å…‹éš†é¡¹ç›®

```bash
git clone https://gitee.com/your-username/uniapp-id-photo.git
cd uniapp-id-photo
```

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ yarn
yarn
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¼€å‘ H5
pnpm dev:h5

# å¼€å‘å¾®ä¿¡å°ç¨‹åº
pnpm dev:mp-weixin

# å¼€å‘æ”¯ä»˜å®å°ç¨‹åº
pnpm dev:mp-alipay

# æ›´å¤šå¹³å°è¯·å‚è€ƒ package.json ä¸­çš„ scripts
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»º H5
pnpm build:h5

# æ„å»ºå¾®ä¿¡å°ç¨‹åº
pnpm build:mp-weixin

# æ„å»ºæ”¯ä»˜å®å°ç¨‹åº
pnpm build:mp-alipay

# æ›´å¤šå¹³å°è¯·å‚è€ƒ package.json ä¸­çš„ scripts
```

## é¡¹ç›®ç»“æ„

```plaintext
uniapp-id-photo/
â”œâ”€â”€ src/                     # æºä»£ç 
â”‚   â”œâ”€â”€ api/                 # API æ¥å£ç›®å½•
â”‚   â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰é’©å­å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useImageBackground.ts  # å›¾ç‰‡èƒŒæ™¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ usePhotoProcessor.ts   # ç…§ç‰‡å¤„ç†
â”‚   â”‚   â””â”€â”€ useToast.ts            # æç¤ºæ¶ˆæ¯
â”‚   â”œâ”€â”€ pages/               # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ photo-result/    # ç…§ç‰‡ç»“æœé¡µé¢
â”‚   â”‚   â”œâ”€â”€ camera/          # ç›¸æœºé¡µé¢
â”‚   â”‚   â””â”€â”€ ...              # å…¶ä»–é¡µé¢
â”‚   â”œâ”€â”€ static/              # é™æ€èµ„æº
â”‚   â”‚   â””â”€â”€ tabbar/          # Tabbar å›¾æ ‡
â”‚   â”œâ”€â”€ stores/              # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ modules/         # çŠ¶æ€æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ photo.ts     # ç…§ç‰‡çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ config.ts    # é…ç½®çŠ¶æ€
â”‚   â”‚   â””â”€â”€ index.ts         # çŠ¶æ€å…¥å£
â”‚   â”œâ”€â”€ styles/              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ file.ts          # æ–‡ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ request.ts       # è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ App.vue              # åº”ç”¨å…¥å£ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts              # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ manifest.json        # åº”ç”¨é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ pages.json           # é¡µé¢é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ uni.scss             # uni-app æ ·å¼å˜é‡
â”œâ”€â”€ devUI3.0/                # UIç•Œé¢è®¾è®¡å‚è€ƒ
â”œâ”€â”€ eslint.config.mjs        # ESLint é…ç½®
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ uno.config.ts            # UnoCSS é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â””â”€â”€ package.json             # ä¾èµ–å’Œè„šæœ¬
```

## åŠŸèƒ½è¯¦è§£

### 1. è¯ä»¶ç…§æ‹æ‘„

- **ç›¸æœºæ§åˆ¶**ï¼šåº”ç”¨æä¾›ç›¸æœºç•Œé¢ï¼Œæ”¯æŒæ‹æ‘„è¯ä»¶ç…§
- **äººè„¸æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹äººè„¸ä½ç½®ï¼Œè¾…åŠ©ç”¨æˆ·è°ƒæ•´æ‹æ‘„è§’åº¦
- **ç…§ç‰‡è£å‰ª**ï¼šæ ¹æ®ä¸åŒè¯ä»¶ç…§è¦æ±‚è‡ªåŠ¨è£å‰ªç…§ç‰‡
- **å¤šç§ç±»å‹**ï¼šæ”¯æŒæŠ¤ç…§ã€èº«ä»½è¯ã€é©¾ç…§ç­‰å¤šç§è¯ä»¶ç…§ç±»å‹å’Œè§„æ ¼

### 2. èƒŒæ™¯è‰²æ›´æ¢

- **ä¸€é”®æ¢è‰²**ï¼šæ”¯æŒä¸€é”®æ›´æ¢èƒŒæ™¯è‰²ï¼ŒåŒ…æ‹¬ç™½è‰²ã€è“è‰²ã€çº¢è‰²ç­‰å¤šç§é¢œè‰²
- **å®æ—¶é¢„è§ˆ**ï¼šèƒŒæ™¯è‰²æ›´æ”¹åå¯å®æ—¶é¢„è§ˆæ•ˆæœ
- **å›¾åƒç¼“å­˜**ï¼šé‡‡ç”¨å›¾åƒç¼“å­˜æœºåˆ¶ï¼Œæé«˜èƒŒæ™¯è‰²åˆ‡æ¢æ•ˆç‡
- **é€æ˜èƒŒæ™¯**ï¼šæ”¯æŒé€æ˜èƒŒæ™¯ï¼Œä¾¿äºç”¨æˆ·æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰èƒŒæ™¯è‰²

### 3. ç…§ç‰‡æ’ç‰ˆ

- **å¤šç§æ’ç‰ˆ**ï¼šæ”¯æŒå•å¼ ã€å¤šå¼ ã€æ»¡ç‰ˆç­‰å¤šç§æ’ç‰ˆæ–¹å¼
- **è‡ªå®šä¹‰å¤§å°**ï¼šå¯è‡ªå®šä¹‰ç…§ç‰‡å°ºå¯¸å’Œæ’ç‰ˆæ–¹å¼
- **æ’ç‰ˆé¢„è§ˆ**ï¼šæä¾›æ’ç‰ˆé¢„è§ˆåŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·ç¡®è®¤æ•ˆæœ

### 4. ç…§ç‰‡ä¸‹è½½

- **å¤šç§æ ¼å¼**ï¼šæ”¯æŒJPGã€PNGç­‰å¤šç§æ ¼å¼ä¸‹è½½
- **é«˜æ¸…å¯¼å‡º**ï¼šæ”¯æŒé«˜æ¸…ç…§ç‰‡å¯¼å‡ºï¼Œæ»¡è¶³æ‰“å°éœ€æ±‚
- **ä¿å­˜ç›¸å†Œ**ï¼šæ”¯æŒä¸€é”®ä¿å­˜åˆ°æ‰‹æœºç›¸å†Œ
- **è·¨å¹³å°**ï¼šé€‚é…ä¸åŒå¹³å°çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç¡®ä¿ä¸‹è½½åŠŸèƒ½åœ¨å„å¹³å°æ­£å¸¸å·¥ä½œ

## éƒ¨ç½²æŒ‡å—

### å¾®ä¿¡å°ç¨‹åºéƒ¨ç½²

1. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æ³¨å†Œå°ç¨‹åºè´¦å·
2. æ„å»ºå¾®ä¿¡å°ç¨‹åºç‰ˆæœ¬ï¼š`pnpm build:mp-weixin`
3. å°†ç”Ÿæˆçš„ dist/build/mp-weixin ç›®å½•ä¸Šä¼ åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·
4. åœ¨å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®ï¼Œå¡«å†™ç‰ˆæœ¬å·å’Œæè¿°
5. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æäº¤å®¡æ ¸å¹¶å‘å¸ƒ

### H5éƒ¨ç½²

1. æ„å»ºH5ç‰ˆæœ¬ï¼š`pnpm build:h5`
2. å°†ç”Ÿæˆçš„ dist/build/h5 ç›®å½•éƒ¨ç½²åˆ°WebæœåŠ¡å™¨
3. é…ç½®æœåŠ¡å™¨HTTPSï¼ˆæ¨èï¼‰
4. é…ç½®æœåŠ¡å™¨ç¼“å­˜ç­–ç•¥ï¼Œä¼˜åŒ–é™æ€èµ„æºåŠ è½½

### Appéƒ¨ç½²

1. å®‰è£…Appæ‰“åŒ…ç¯å¢ƒï¼š`HBuilderX`
2. å¯¼å…¥é¡¹ç›®åˆ° HBuilderX
3. ç‚¹å‡»"å‘è¡Œ" -> "åŸç”ŸApp-äº‘æ‰“åŒ…"
4. é…ç½®è¯ä¹¦å’Œåº”ç”¨ä¿¡æ¯
5. ç­‰å¾…äº‘æ‰“åŒ…å®Œæˆï¼Œä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå‘å¸ƒ

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: å¾®ä¿¡å°ç¨‹åºå›¾ç‰‡æ— æ³•ä¿å­˜æ€ä¹ˆåŠï¼Ÿ

A1: éœ€è¦åœ¨å°ç¨‹åºé…ç½®ä¸­æ·»åŠ ç›¸å†Œè®¿é—®æƒé™ï¼Œåœ¨ `manifest.json` ä¸­çš„ `mp-weixin` é…ç½®é¡¹ä¸‹æ·»åŠ ï¼š

```json
"permission": {
  "scope.writePhotosAlbum": {
    "desc": "ä¿å­˜è¯ä»¶ç…§åˆ°ç›¸å†Œ"
  }
}
```

### Q2: èƒŒæ™¯è‰²åˆ‡æ¢ä¸ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ

A2: å¯èƒ½æ˜¯ç¼“å­˜å¯¼è‡´çš„é—®é¢˜ã€‚è¯·å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š

1. ç¡®ä¿ä½¿ç”¨çš„æ˜¯é€æ˜èƒŒæ™¯å›¾ç‰‡ä½œä¸ºåŸºç¡€
2. æ¸…é™¤å›¾ç‰‡ç¼“å­˜ï¼šåº”ç”¨ä¼šåœ¨é¡µé¢å…³é—­æ—¶è‡ªåŠ¨æ¸…é™¤ç¼“å­˜
3. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. é‡å¯åº”ç”¨

### Q3: iOSè®¾å¤‡æ‹ç…§åç…§ç‰‡æ—‹è½¬äº†æ€ä¹ˆåŠï¼Ÿ

A3: è¿™æ˜¯ç”±äºiOSè®¾å¤‡æ‹ç…§çš„EXIFä¿¡æ¯å¯¼è‡´çš„ã€‚åº”ç”¨å·²å¤„ç†è¿™ä¸€æƒ…å†µï¼Œè‡ªåŠ¨çº æ­£ç…§ç‰‡æ–¹å‘ã€‚å¦‚ä»æœ‰é—®é¢˜ï¼Œè¯·ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚

### Q4: æ€æ ·è‡ªå®šä¹‰è¯ä»¶ç…§å°ºå¯¸ï¼Ÿ

A4: ç›®å‰åº”ç”¨æ”¯æŒå¤šç§é¢„è®¾å°ºå¯¸ã€‚è‡ªå®šä¹‰å°ºå¯¸åŠŸèƒ½å°†åœ¨åç»­ç‰ˆæœ¬ä¸­æä¾›ã€‚

## ä»£ç è§„èŒƒ

é¡¹ç›®é›†æˆäº† ESLint å’Œ Prettier è¿›è¡Œä»£ç è´¨é‡æ§åˆ¶å’Œæ ¼å¼åŒ–ã€‚

### ESLint é…ç½®

ESLint é…ç½®ä½äº `eslint.config.mjs` æ–‡ä»¶ï¼Œé’ˆå¯¹ JavaScriptã€TypeScript å’Œ Vue æ–‡ä»¶æä¾›äº†ä»£ç è§„èŒƒæ£€æŸ¥ã€‚

```bash
# è¿è¡Œ ESLint æ£€æŸ¥å¹¶ä¿®å¤
pnpm lint
```

### æäº¤è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ commitlint å¼ºåˆ¶å®æ–½ Git æäº¤æ¶ˆæ¯è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤é—®é¢˜
- `docs`: æ–‡æ¡£å˜æ›´
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
- `refactor`: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: å¢åŠ æµ‹è¯•
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `revert`: å›é€€
- `build`: æ‰“åŒ…

æäº¤ç¤ºä¾‹ï¼š

```bash
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"
```

## UnoCSS é›†æˆ

é¡¹ç›®é›†æˆäº† UnoCSS æä¾›åŸå­åŒ– CSS è§£å†³æ–¹æ¡ˆï¼š

```html
<!-- ç¤ºä¾‹ç”¨æ³• -->
<view class="flex justify-center items-center p-4 bg-blue-500 text-white">UnoCSS ç¤ºä¾‹</view>
```

## Pinia çŠ¶æ€ç®¡ç†

é¡¹ç›®ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œç¤ºä¾‹æ–‡ä»¶ä½äº `src/stores/` ç›®å½•ä¸‹ã€‚

```typescript
// ä½¿ç”¨ store
const photoStore = usePhotoStore();

// è·å–ç…§ç‰‡è·¯å¾„
const imgPath = computed(() => photoStore.photoState.processedImagePath);

// æ›´æ–°ç…§ç‰‡è·¯å¾„
photoStore.setProcessedImage(newImagePath);
```

## HTTP è¯·æ±‚å°è£…

é¡¹ç›®å¯¹ uni.request è¿›è¡Œäº†å°è£…ï¼Œæä¾›äº†æ‹¦æˆªå™¨å’Œç»Ÿä¸€çš„é”™è¯¯å¤„ç†ï¼š

```typescript
// ç¤ºä¾‹ç”¨æ³•
import { request } from "@/utils/request";

const data = await request<ResponseType>({
  url: "/api/endpoint",
  method: "GET",
});
```

## è‡ªåŠ¨å¯¼å…¥

é¡¹ç›®é…ç½®äº† unplugin-auto-import å’Œ unplugin-vue-components å®ç° API å’Œç»„ä»¶çš„è‡ªåŠ¨å¯¼å…¥ï¼š

- Vue API è‡ªåŠ¨å¯¼å…¥
- Vue ç»„ä»¶è‡ªåŠ¨å¯¼å…¥
- uni-app API è‡ªåŠ¨å¯¼å…¥
- Pinia API è‡ªåŠ¨å¯¼å…¥

## ç»„ä»¶ä½¿ç”¨

é¡¹ç›®é…ç½®äº† easycomï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `components` ç›®å½•ä¸‹çš„ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥ï¼š

```html
<!-- ç¤ºä¾‹ç”¨æ³•ï¼Œæ— éœ€å¯¼å…¥ -->
<custom-component></custom-component>
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç æˆ–æå‡ºå»ºè®®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'feat: æ·»åŠ ä¸€äº›åŠŸèƒ½'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## è®¸å¯è¯

[MIT](LICENSE)
